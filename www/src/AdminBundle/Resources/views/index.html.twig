{% extends 'AdminBundle::admin.html.twig' %}

{% block body %}

    <script type="text/javascript" charset="utf-8">

        var mainMenuData = [
            {id: "1", type: "folder", value: "Benutzer", css: "folder_music"},
            {id: "2", type: "folder", value: "Autoren", css: "folder_music"},
            {id: "3", type: "folder", value: "Themenfelder", css: "folder_music"},
            {id: "4", type: "folder", value: "Geschichten", css: "folder_music"}
        ];

        webix.ui({
            rows: [
                {
                    view: "template",
                    type: "header", template: "Dembelo Admin Area"
                },
                {
                    cols: [
                        {
                            id: "mainnav",
                            view: "tree",
                            gravity: 0.2,
                            select: true,
                            data: mainMenuData
                        },
                        {view: "resizer"},
                        {
                            rows: [
                                {
                                    fitBiggest:true,
                                    multiview: true,
                                    cells: [
                                        {
                                            id: "userstuff",
                                            cols: [
                                                {
                                                    id: "usergrid",
                                                    view: "datatable",
                                                    autoConfig: true,
                                                    select: true,
                                                    datatype: "json"
                                                },
                                                {
                                                    view: "form",
                                                    id: "userform",
                                                    gravity: 0.5,
                                                    elements: [
                                                        {view: "text", name: "email", label: "Email"},
                                                        {view:"button", value:"Speichern" }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            id: "authorgrid",
                                            view: "datatable",
                                            autoConfig: true,
                                            select: true,
                                            datatype: "json"
                                        },
                                        {
                                            id: "topicgrid",
                                            view: "datatable",
                                            autoConfig: true,
                                            select: true,
                                            datatype: "json"
                                        },
                                        {
                                            id: "storygrid",
                                            view: "datatable",
                                            autoConfig: true,
                                            select: true,
                                            datatype: "json"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        $$("mainnav").attachEvent("onAfterSelect", function(id){
            if (id == 1) {
                $$('usergrid').load("{{ path('admin_users') }}");
                $$('userstuff').show();
            } else if (id == 2) {
                $$('authorgrid').load("{{ path('admin_authors') }}");
                $$('authorgrid').show();
            } else if (id == 3) {
                $$('topicgrid').load("{{ path('admin_topics') }}");
                $$('topicgrid').show();
            } else if (id == 4) {
                $$('storygrid').load("{{ path('admin_stories') }}");
                $$('storygrid').show();
            }
        });

        $$("mainnav").select(1);

        $$('userform').bind($$('usergrid'));

    </script>

{% endblock %}